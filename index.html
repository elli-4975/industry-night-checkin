<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Industry Night Check-In</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 100px; }
    input { margin: 10px; padding: 10px; width: 250px; font-size: 16px; }
    button { padding: 10px 25px; font-size: 16px; cursor: pointer; }
    .message { margin-top: 25px; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Industry Night Check-In</h2>
  <p>Enter your full name exactly as you used to RSVP:</p>
  <input id="name" type="text" placeholder="Full Name">
  <br>
  <button onclick="checkIn()">Check In</button>
  <div class="message" id="result"></div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbzpL3moD7Xw0Ve_wKc2UkFw936jTq0BuBpMAH9RzfWeLS1VDBwHDq6S5xHVoZTOrs2Dvg/exec";       // <-- your Google Apps Script web app URL
    const rsvpFormURL = "https://docs.google.com/forms/d/e/1FAIpQLSdMoG7ySrfnlO4lPksTj7A0mNMa5Pj2xDqBeeEGkSdrMtU5CA/viewform?usp=dialog";       // <-- where non-RSVPs should go
    const thankYouURL = "https://electronics.stackexchange.com/questions/557937/solder-wont-stick-to-metal-tab-no-matter-what-i-do";  // <-- where confirmed attendees go

    async function checkIn() {
      const name = document.getElementById('name').value.trim();
      const resultDiv = document.getElementById('result');

      if (!name) {
        resultDiv.textContent = "Please enter your name.";
        return;
      }

      resultDiv.textContent = "Checking…";

      try {
        const response = await fetch(`${scriptURL}?name=${encodeURIComponent(name)}`);
        const data = await response.json();

        if (data.status === "rsvp") {
          resultDiv.innerHTML = "✅ You're on the RSVP list! Redirecting…";
          setTimeout(() => { window.location.href = thankYouURL; }, 1500);
        } else {
          resultDiv.innerHTML = "❌ We couldn't find your name. Redirecting to registration…";
          setTimeout(() => { window.location.href = rsvpFormURL; }, 1500);
        }
      } catch (err) {
        console.error(err);
        resultDiv.textContent = "Error connecting to server. Please try again.";
      }
    }
  </script>
</body>
</html>
